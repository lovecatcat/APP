<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <link href="css/mui.css" rel="stylesheet"/>
    <link href="css/common.css" rel="stylesheet"/>
    <link href="css/module.css" rel="stylesheet"/>
    <link href="css/index.css" rel="stylesheet"/>
    <script src="js/config.js" type="text/javascript"></script>
</head>

<body class="BL-bg-f2f">

<header id="Js-header" style="position: fixed;left: 0;top: 0;width: 100%;z-index: 99;">
    <div class="BL-mod-headbar">
        <div class="BL-ub BL-ub-ac headbar-search">
            <div id="Js-ring" class="rings BL-bimg-contain" alt="消息通知">
                <span id="" alt="消息红点提示"></span>
            </div>

            <div class="seek BL-ub BL-ub-ac BL-ub-pc BL-ub-f1">
                <div class="button"></div>
                <div class="text">搜索</div>
            </div>

            <div id="Js-contact" class="contact BL-bimg-contain" alt="通讯录"></div>
        </div>
    </div>
</header>

<div id="Js-content" class="mui-content" style="padding-top: 0;">
    <div id="Js-main">
        <div class="mui-scroll-wrapper">
            <div class="mui-scroll">
                <!--这里放置真实显示的DOM内容-->

                <!----------- 图片轮播  begin -------------->
                <div id="slider" class="mui-slider" v-if="bannerList" v-cloak>
                    <div class="mui-slider-group mui-slider-loop">
                        <!-- 额外增加的一个节点(循环轮播：第一个节点是最后一张轮播) -->
                        <div class="mui-slider-item mui-slider-item-duplicate">
                            <a href="#">
                                <img :src="bannerList[0]">
                            </a>
                        </div>
                        <div class="mui-slider-item" v-for="(item,index) in bannerList">
                            <a href="#">
                                <img :src="item">
                            </a>
                        </div>
                        <!-- 额外增加的一个节点(循环轮播：最后一个节点是第一张轮播) -->
                        <div class="mui-slider-item mui-slider-item-duplicate">
                            <a href="#">
                                <img :src="bannerList[banner_count-1]">
                            </a>
                        </div>
                    </div>
                    <div class="mui-slider-indicator" v-if="banner_count>0">
                        <div class="mui-indicator mui-active" :class="{'mui-active':key===1}"
                             v-for="(item,key) in banner_count"></div>
                    </div>
                </div>
                <!----------- 图片轮播  end   -------------->

                <!----------- 九宫格菜单  begin -------------->
                <div class="BL-pad-a1_25 BL-mar-b-1 BL-bg-fff" style="padding-bottom: 0;">
                    <div class="mui-row squared">
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="sns.html" data-wid="sns" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">SNS</div>
                            </a>
                        </div>
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="ins2c.html" data-wid="ins2c" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">交单</div>
                            </a>
                        </div>
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="auto2c.html" data-wid="ins2c" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">车险</div>
                            </a>
                        </div>
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="product.html" data-wid="product" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">分类</div>
                            </a>
                        </div>
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="quickly.html" data-wid="quickly" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">快速投保</div>
                            </a>
                        </div>
                        <!--<div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <div class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">需求分析</div>
                            </div>
                        </div>-->
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a href="shop.html" data-wid="shop" class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">积分商城</div>
                            </a>
                        </div>
                        <div class="mui-col-sm-3 mui-col-xs-3 squared-menu">
                            <a class="menu">
                                <div class="icon">&nbsp;</div>
                                <div class="name">闪电增员</div>
                            </a>
                        </div>
                    </div>
                </div>
                <!----------- 九宫格菜单  end -------------->

                <!----------- 短期险  begin -------------->
                <div class="insure BL-mar-b-1" v-if="safegoods_1" v-cloak>
                    <div class="BL-ub BL-ub-pj BL-ub-ac insure-hd">
                        <div class="BL-ub BL-ub-ac title">
                            <div class="icon icon-1"></div>
                            <span>短期险</span>
                        </div>
                        <a class="BL-ub BL-ub-ac more" href="product.html" data-wid="product" data-id="LBI0002">
                            <span>更多</span>
                            <div class="mui-icon mui-icon-arrowright"></div>
                        </a>
                    </div>
                    <div class="insure-group BL-ub BL-ub-ac" v-if="safegoods_1" v-cloak>
                        <div class="item" v-for="(item,index) in safegoods_1">
                            <div class="item-content">
                                <div class="img">
                                    <img :src="item.image_url" @error="item.image_url='images/pic/p11.jpg'"/>
                                    <span class="new">{{item.product_sign}}</span>
                                </div>
                                <div class="context">
                                    <div class="tit">{{item.short_name}}</div>
                                    <div class="text mui-ellipsis BL-pad-b_5">{{item.keywords}}</div>
                                    <div class="price BL-ub BL-ub-ac">
                                        <span>￥</span>
                                        <span class="money">{{item.price}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------- 短期险  end   -------------->

                <!----------- 重疾险  begin -------------->
                <div class="insure BL-mar-b-1" v-if="safegoods_2" v-cloak>
                    <div class="BL-ub BL-ub-pj BL-ub-ac insure-hd">
                        <div class="BL-ub BL-ub-ac title">
                            <div class="icon icon-2"></div>
                            <span>重疾险</span>
                        </div>
                        <a class="BL-ub BL-ub-ac more" href="product.html" data-wid="product" data-id="LBI0001">
                            <span>更多</span>
                            <div class="mui-icon mui-icon-arrowright"></div>
                        </a>
                    </div>
                    <div class="insure-group BL-ub BL-ub-ac">
                        <div class="item" v-for="(item,index) in safegoods_2">
                            <div class="item-content">
                                <div class="img">
                                    <img :src="item.image_url" @error="item.image_url='images/pic/p11.jpg'"/>
                                    <span class="new">{{item.product_sign}}</span>
                                </div>
                                <div class="context">
                                    <div class="tit">{{item.short_name}}</div>
                                    <div class="text mui-ellipsis BL-pad-b_5">{{item.keywords}}</div>
                                    <div class="price BL-ub BL-ub-ac">
                                        <span>￥</span>
                                        <span class="money">{{item.price}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------- 重疾险  end   -------------->

                <!----------- 意外险  begin -------------->
                <div class="insure BL-mar-b-1" v-if="safegoods_3" v-cloak>
                    <div class="BL-ub BL-ub-pj BL-ub-ac insure-hd">
                        <div class="BL-ub BL-ub-ac title">
                            <div class="icon icon-3"></div>
                            <span>意外险</span>
                        </div>
                        <a class="BL-ub BL-ub-ac more" href="product.html" data-wid="product" data-id="LBI0004">
                            <span>更多</span>
                            <div class="mui-icon mui-icon-arrowright"></div>
                        </a>
                    </div>
                    <div class="insure-group BL-ub BL-ub-ac">
                        <div class="item" v-for="(item,index) in safegoods_3">
                            <div class="item-content">
                                <div class="img">
                                    <img :src="item.image_url" @error="item.image_url='images/pic/p11.jpg'"/>
                                    <span class="new">{{item.product_sign}}</span>
                                </div>
                                <div class="context">
                                    <div class="tit">{{item.short_name}}</div>
                                    <div class="text mui-ellipsis BL-pad-b_5">{{item.keywords}}</div>
                                    <div class="price BL-ub BL-ub-ac">
                                        <span>￥</span>
                                        <span class="money">{{item.price}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------- 意外险  end   -------------->

                <!----------- 理财险  begin -------------->
                <div class="insure BL-mar-b-1" v-if="safegoods_4" v-cloak>
                    <div class="BL-ub BL-ub-pj BL-ub-ac insure-hd">
                        <div class="BL-ub BL-ub-ac title">
                            <div class="icon icon-4"></div>
                            <span>理财险</span>
                        </div>
                        <a class="BL-ub BL-ub-ac more" href="product.html" data-wid="product" data-id="LBI0005">
                            <span>更多</span>
                            <div class="mui-icon mui-icon-arrowright"></div>
                        </a>
                    </div>
                    <div class="insure-group BL-ub BL-ub-ac">
                        <div class="item" v-for="(item,index) in safegoods_4">
                            <div class="item-content">
                                <div class="img">
                                    <img :src="item.image_url" @error="item.image_url='images/pic/p11.jpg'"/>
                                    <span class="new">{{item.product_sign}}</span>
                                </div>
                                <div class="context">
                                    <div class="tit">{{item.short_name}}</div>
                                    <div class="text mui-ellipsis BL-pad-b_5">{{item.keywords}}</div>
                                    <div class="price BL-ub BL-ub-ac">
                                        <span>￥</span>
                                        <span class="money">{{item.price}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!----------- 理财险  end   -------------->

            </div>
        </div>

    </div>
</div>

<!----------- 打卡按键  begin -------------->
<a class="BL-mod-sign" href="member-duty.html" data-wid="member_duty">
    <div class="sign BL-bimg-contain"></div>
</a>
<!----------- 打卡按键  end   -------------->

</body>
<script src="js/mui.js" type="text/javascript"></script>
<script src="js/vue.min.js" type="text/javascript"></script>
<script type="text/javascript">
    mui.init();

    mui.plusReady(function () {
        // 改变头部搜索栏背景色
        document.querySelector(".mui-scroll-wrapper").addEventListener('scroll', function (e) {
            var y = Math.abs(e.detail.y) * 0.01;
            document.querySelector('#Js-header').style.background = "rgba(53,153,241," + y + ")";
        });

        function init() {
            statusbar();
            var winH = window.innerHeight;
            document.querySelector('#Js-main').style.height = winH + "px";

            mui('.mui-scroll-wrapper').scroll({
                scrollY: true, //是否竖向滚动
                scrollX: false, //是否横向滚动
                startX: 0, //初始化时滚动至x
                startY: 0, //初始化时滚动至y
                indicators: false, //是否显示滚动条
                deceleration: 0.0001, //阻尼系数,系数越小滑动越灵敏
                bounce: false //是否启用回弹
            });
        }

        //主列表点击事件
        mui('body').on('tap', 'a', function () {
            var href = this.getAttribute('href');
            var id = this.getAttribute("data-wid");
            var tid = this.getAttribute("data-id");

            //非plus环境，直接走href跳转
            if (!mui.os.plus) {
                location.href = href;
                return;
            }

            if (href && ~href.indexOf('.html')) {
                //打开新窗口
                if (tid) {
                    mui.openWindow({
                        url: href,
                        id: id,
                        show: animateObj.aniPage,
                        extras: {
                            instype: tid
                        }
                    });
                } else {
                    mui.openWindow({
                        url: href,
                        id: id,
                        show: animateObj.aniPage
                    });
                }

            }
        });
        var index = new Vue({
            el: '#Js-content',
            data: {
                banner_count: '',
                bannerList: [],
                safegoods_1: '',
                safegoods_2: '',
                safegoods_3: '',
                safegoods_4: ''
            }
        })
        mui.ajax('http://www.luckyins.com/api/api/invoke', {
            data: {
                device: 'mobile',
                server: 'lifeProduct.getIndexProductList',
                data: JSON.stringify({ins_type: 'LBI0001,LBI0002,LBI0004,LBI0005'})
            },
            dataType: 'json',//服务器返回json格式数据
            type: 'post',//HTTP请求类型
            timeout: 10000,//超时时间设置为10秒；
            headers: {'Content-Type': 'application/json'},
            success: function (data) {
                console.log(JSON.stringify(data))
                if (data.code === 1) {
                    init();
                    mui("#slider").slider();
                    index.bannerList = data.data.banner;
                    index.banner_count = data.data.banner.length;
                    index.safegoods_1 = data.data.list['重疾保障'];
                    index.safegoods_2 = data.data.list['养老规划'];
                    index.safegoods_3 = data.data.list['少儿教育'];
                    index.safegoods_4 = data.data.list['财富管理'];
                    mui.toast(data.msg, {duration: 'short', type: 'div'})
                } else {
                    mui.toast(data.msg, {duration: 'short', type: 'div'})
                    return false;
                }
            },
            error: function (xhr, type, errorThrown) {
                mui.toast(errorThrown, {duration: 'short', type: 'div'})
                return false
            }
        });
    })
</script>

</html>