<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title></title>    <link href="css/mui.css" rel="stylesheet"/>    <link href="css/common.css" rel="stylesheet"/>    <link href="css/module.css" rel="stylesheet"/>    <link href="css/form.css" rel="stylesheet"/>    <link href="css/member.css" rel="stylesheet"/>    <script src="js/config.js" type="text/javascript"></script></head><body class="BL-bg-f2f"><header id="Js-header" class="BL-bg-fff">    <div class="BL-mod-headbar BL-mod-headbar-pos">        <a class="mui-action-back mui-icon-left-nav BL-icon BL-icon-left"></a>        <h1 class="BL-title">个人信息</h1>    </div></header><div id="Js-content" class="mui-content BL-rel BL-overFlow-autoY" v-cloak>    <ul class="mui-table-view form-list-cell" v-if="userinfo">        <li class="fItem BL-ub BL-ub-f1">            <div id="member-avatar" class="mui-navigate-right BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">头像</div>                <div class="form-list-control BL-txt-r BL-mar-r-2">                    <div class="member-personalinfo-img">                        <img :src="userinfo.avatar" @error="nofind"/>                    </div>                </div>            </div>        </li>    </ul>    <ul class="mui-table-view form-list-cell" v-if="userinfo">        <li class="fItem BL-ub BL-ub-f1">            <a href="javascript:;" class="BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">姓名</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">{{userinfo.user_name}}</div>            </a>        </li>        <li class="fItem BL-ub BL-ub-f1">            <a href="javascript:;" class="BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">职位职别</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">{{userinfo.rank_name}}</div>            </a>        </li>        <li class="fItem BL-ub BL-ub-ac BL-ub-f1">            <a href="javascript:;" class="BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">所属机构</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">{{userinfo.dept_name}}</div>            </a>        </li>        <li class="fItem BL-ub BL-ub-ac BL-ub-f1">            <a href="javascript:;" class="BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">手机号码</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">{{userinfo.tel}}</div>            </a>        </li>        <li class="fItem BL-ub BL-ub-ac BL-ub-f1">            <a href="javascript:;" class="BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">渠道号</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">{{userinfo.channel_id}}</div>            </a>        </li>        <li class="fItem BL-ub BL-ub-ac BL-ub-f1">            <a href="javascript:;" class="mui-navigate-right BL-ub BL-ub-ac BL-ub-f1">                <div class="form-list-label">微信绑定</div>                <div class="form-list-control BL-txt-r BL-mar-r-2 BL-col-999">未绑定</div>            </a>        </li>    </ul></div></body><script src="js/mui.min.js" type="text/javascript"></script><script src="js/vue.min.js" type="text/javascript"></script><script type="text/javascript">    mui.init();    mui.plusReady(function () {        statusbar();        isLogin();        mui('body').on('tap', 'a', function () {            var href = this.getAttribute('href');            var id = this.getAttribute("data-wid");            //打开新窗口            mui.openWindow({                url: href,                id: id,                show: animateObj.aniDetal            })        })        var personal = new Vue({            el: '#Js-content',            data: {                userinfo: '',            }        })        mui('body').on('tap', '#member-avatar', function () {            // 打开遮罩层，弹框            showPopu("member-avatarmenu.html", "member-avatarmenu", "bottom");        });        // 点击关闭遮罩层，弹框        mui('body').on('tap', '#maskInit', function () {            // 关闭遮罩层，弹框            popu.closepop();        }, false);        var userinfo = JSON.parse(plus.storage.getItem('userinfo'));        personal.userinfo = userinfo;        var winH = window.innerHeight;        var titHeight = document.querySelector('#Js-header').offsetHeight;        document.querySelector('#Js-content').style.height = (winH - titHeight) + 'px';        //获取要上传的头像        window.addEventListener('img', function (event) {            upload(event.detail.img);        });        //上传头像        function upload(img) {            luckyAjax({                data: {                    data: JSON.stringify({user_id: userinfo.id, image: img}),                    server: 'user.changeAvatar'                },                success: function (data) {                    console.log('upload-success')                    console.log(JSON.stringify(data))                    if (data.code === 1) {                        mui.toast(data.msg, {duration: 'short', type: 'div'})                        userinfo.avatar = data.data;                        plus.storage.setItem('userinfo', JSON.stringify(userinfo));                        mui.fire(plus.webview.getWebviewById('member'), 'reload');                    } else {                        mui.toast(data.msg, {duration: 'short', type: 'div'})                        return false;                    }                }            });        }    })    function nofind() {        var img = event.srcElement;        img.src = "images/icon/avatar-default.png";        img.onerror = null; //控制不要一直跳动    }</script></html>