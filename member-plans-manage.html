<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<link href="css/mui.css" rel="stylesheet" />
		<link href="css/common.css" rel="stylesheet" />
		<link href="css/module.css" rel="stylesheet" />
		<link href="css/plans.css" rel="stylesheet" />
		<script src="js/config.js" type="text/javascript"></script>
	</head>

	<body class="BL-bg-f2f">
		<header id="Js-header" class="BL-bg-fff">
			<div class="BL-mod-headbar">
				<div class="BL-ub BL-ub-ac headbar-search">
					<a class="mui-action-back mui-icon-left-nav BL-icon BL-icon-left"></a>
					<div class="search search-pro BL-ub BL-ub-ac BL-ub-f1">
						<input type="search" name="Js-search" id="Js-search" value="险种名称、投保人" class="BL-ub BL-ub-f1" />
						<div class="button">
							<span class="BL-bimg-contain">&nbsp;</span>
						</div>
					</div>
					<div class="control">
						<a>完成</a>
					</div>
				</div>
			</div>
		</header>

		<div id="Js-content" class="mui-content plan">
			<!------------条件筛选 begin------------->
			<div id="Js-planFilter" class="plan-filter">
				<!--时间筛选 begin-->
				<a class="mui-control-item mui-active">
					全部
				</a>
				<a class="mui-control-item">
					近三天
				</a>
				<a class="mui-control-item">
					近七天
				</a>
				<a class="mui-control-item">
					近一月
				</a>
				<!--时间筛选 end -->
			</div>
			<!------------条件筛选 end  ------------->

			<!------------产品列表 begin------------->
			<div id="Js-planList" class="plan-list">
				<div class="mui-content mui-scroll-wrapper BL-bg-f2f">
					<div class="mui-scroll">
						<!--活动中，数据列表-->
						<ul class="mui-table-view plan-list-cell">
							<li class="BL-ub BL-ub-ac cItem cItem-active">
								<div class="selected">
									<div class="mui-icon mui-icon-checkmarkempty"></div>	
								</div>
								<a data-wid="product_detail" href="member-plans-detail.html" class="BL-ub BL-ub-f1 pro-content pro-icon-new mui-navigate-right" >
									<div class="img">
										<img src="images/pic/p6.jpg" />
									</div>
									<div class="context BL-ub BL-ub-ver BL-ub-f1">
										<div class="context-top">
											<h1 class="tit">横琴优</h1>
											<div class="mui-btn mui-btn-primary BL-ub-ac btn">
												组合计划
											</div>
											<div class="data" style="display: none;">
												2018-12-12
											</div>
										</div>
										<div class="text">委会副主任张杰辉涉嫌严重违纪</div>
									</div>
								</a>
							</li>
			
						
						</ul>
					</div>
				</div>
			</div>
			<!------------产品列表 end  ------------->
		</div>
		<footer id="Js-footer" class="BL-footer BL-bg-fff">
			<div class="BL-ub BL-ub-ac BL-ub-f1">
				<div id="" class="BL-ub BL-ub-f1 BL-ub-ac BL-foot-selectAll">
					<div class="selected">
						<div class="mui-icon mui-icon-checkmarkempty"></div>	
					</div>
					<div class="context">
						全选择
					</div>
				</div>
				<a class="BL-foot-btn-sign BL-foot-btn-det">
					删除
				</a>
			</div>
		</footer>
	</body>
	<script src="js/mui.min.js" type="text/javascript"></script>
	<script src="js/mui.pullToRefresh.js"></script>
	<script src="js/mui.pullToRefresh.material.js"></script>
	<script type="text/javascript">
		mui.init();

		(function($) {
			//阻尼系数
			var deceleration = mui.os.ios ? 0.003 : 0.0009;
			$('#Js-planList .mui-scroll-wrapper').scroll({
				bounce: true,
				indicators: false, //是否显示滚动条
				deceleration: deceleration
			});
			$.plusReady(function() {
				statusbar();
				var winH = window.innerHeight;
				var titHeight = document.querySelector('#Js-header').offsetHeight;
				var divHeight = document.querySelector('#Js-planFilter').offsetHeight;
				var fotHeight = document.querySelector('#Js-footer').offsetHeight;
				document.querySelector('#Js-planList').style.height = winH - titHeight - divHeight - fotHeight + 'px';
				//document.querySelector('#Js-list').style.height = (winH - topHeight - mainHeight) + 'px';

				var i = 0;

				//循环初始化所有下拉刷新，上拉加载。

				$('#Js-planList .mui-scroll').pullToRefresh({
					up: { // 上拉加载更多
						auto: true, // 自动上拉一次
						callback: function() {
							i++;

							var self = this;
							setTimeout(function() {
								var ul = self.element.querySelector('.mui-table-view');
								ul.appendChild(createFragment(ul, 5));
								if(i > 2) {
									self.endPullUpToRefresh(true);
								} else {
									self.endPullUpToRefresh();
								}
							}, 1000);
						}
					}
				});

				var createFragment = function(ul, count) {
					var length = ul.querySelectorAll('li').length;
					var fragment = document.createDocumentFragment();
					var li;
					for(var i = 0; i < count; i++) {
						li = document.createElement('li');
						li.className = 'BL-ub BL-ub-ac cItem';
						li.innerHTML = '<div class="selected"><div class="mui-icon mui-icon-checkmarkempty"></div></div>'+
						'<div class="BL-ub BL-ub-f1 pro-content pro-icon-new mui-navigate-right" >'+
						'<div class="img"><img src="images/pic/p6.jpg" /></div>'+
						'<div class="context BL-ub BL-ub-ver BL-ub-f1">'+
						'<div class="context-top"><h1 class="tit">横琴优</h1>'+
						'<div class="mui-btn mui-btn-primary BL-ub-ac btn">组合计划</div>'+
						'<div class="data">2018-12-12</div></div>'
						'<div class="text">委会副主任张杰辉涉嫌严重违纪</div>'+
						'</div></div>';
						fragment.appendChild(li);
					}
					return fragment;
				};

			});

		}(mui));

		//主列表点击事件
		mui('body').on('tap', 'a', function() {
			var href = this.getAttribute('href');
			var id = this.getAttribute("data-wid");

			//非plus环境，直接走href跳转
			if(!mui.os.plus) {
				location.href = href;
				return;
			};

			if(href && ~href.indexOf('.html')) {
				//打开新窗口
				mui.openWindow({
					id: id,
					url: href,
					show: animateObj.aniDetal
				});
			}

		});
	</script>

</html>