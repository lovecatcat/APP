<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<link href="css/mui.css" rel="stylesheet" />
		<link href="css/common.css" rel="stylesheet" />
		<link href="css/module.css" rel="stylesheet" />
		<link href="css/member.css" rel="stylesheet" />
		<script src="js/config.js" type="text/javascript"></script>
	</head>

	<body>
		<header id="Js-header" class="BL-bg-fff">
	        <div class="BL-mod-headbar BL-mod-headbar-pos">
	            <a class="mui-action-back mui-icon-left-nav BL-icon BL-icon-left"></a>
	            <h1 class="BL-title">pdf名称</h1>
	            <!--<a class="BL-icon BL-icon-share"></a>-->
	        </div>
	    </header>
		<div id="modal">
			<canvas id="the-canvas"></canvas>	
		</div>
	</body>
	<script src="js/mui.min.js" type="text/javascript"></script>
	<script src="js/pdf.js" type="text/javascript"></script>
	<script type="text/javascript">
		mui.init();
		
		(function($){
			// 设置内容区域
			$.plusReady(function() {
				statusbar();
				
				// 实例化关闭窗口对象
				var url = plus.webview.currentWebview().pdf;
				
				//var container = document.getElementById("pdf");
				//container.style.display = "block";
				
				//pdf = 'images/a.pdf';
				PDFJS.workerSrc = 'js/pdf.worker.js';
				
				// Asynchronous download of PDF
				var loadingTask = PDFJS.getDocument(url);
				loadingTask.promise.then(function(pdf) {
				  	console.log('Page loaded');
				  
				  	// Fetch the first page
				  	var pageNumber = 1;
				  	pdf.getPage(pageNumber).then(function(page) {
					    console.log('Page loaded');
					    
					    var scale = 1.5;
					    var viewport = page.getViewport(scale);
						console.log(JSON.stringify(viewport));
						
					    // Prepare canvas using PDF page dimensions
					    var canvas = document.getElementById('the-canvas');
					    var context = canvas.getContext('2d');
					    canvas.height = viewport.height;
					    canvas.width = viewport.width;
					
					    // Render PDF page into canvas context
					    var renderContext = {
					      	canvasContext: context,
					      	viewport: viewport
					    };
					    var renderTask = page.render(renderContext);
					    renderTask.then(function () {
					      	console.log('Page rendered');
					    });
				  	});
				}, function (reason) {
				  // PDF loading error
				  console.error(reason);
				});
				
				
			});	
		}(mui));
	</script>
</html>

