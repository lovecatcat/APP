<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <link href="css/mui.css" rel="stylesheet"/>
    <link href="css/common.css" rel="stylesheet"/>
    <link href="css/module.css" rel="stylesheet"/>
    <link href="css/product.css" rel="stylesheet"/>
    <script src="js/config.js" type="text/javascript"></script>
</head>

<body class="BL-bg-f2f">
<div id="Js-contrast">

    <div id="Js-header" class="BL-ub BL-ub-ac BL-ub-pc BL-pad-r-1_25 BL-bg-fff">
        <div class=""><a class="mui-action-back mui-icon-left-nav BL-icon BL-icon-left"></a></div>
        <h1 class="BL-title BL-ub-f1">产品对比</h1>
        <div class="header-operate"></div>
    </div>

    <div id="Js-content" class="mui-content product-contrast">
        <!------------产品列表 begin------------->
        <div id="Js-wrapperList" class="contr-wrapper BL-mar-t-1">
            <div class="mui-content mui-scroll-wrapper BL-bg-f2f">
                <div class="mui-scroll">
                    <div class="contr-listAdd">
                        <div class="BL-ub BL-ub-ac item item-active" v-if="list" v-cloak>
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">{{list.product_name}}</div>
                                <div class="business">{{list.company_name}}</div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安人寿
                                </div>
                            </div>
                        </div>
                        <div class="BL-ub BL-ub-ac item item-active">
                            <div class="selected">
                                <div class="mui-icon mui-icon-checkmarkempty"></div>
                            </div>
                            <div class="context">
                                <div class="title">
                                    惠州龙门大观园温泉，鲁冰花 童话园2日游
                                </div>
                                <div class="business">
                                    平安1人寿
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!------------产品列表 end  ------------->
    </div>
    <footer id="Js-footer" class="BL-footer BL-bg-fff">
        <div class="BL-ub BL-ub-ac BL-ub-f1">
            <div class="BL-ub BL-ub-f1 BL-ub-ae BL-foot-contrast">
                可选择对比产品
            </div>
            <a data-wid="product_contrast_detail" href="product-contrast-detail.html" class="BL-foot-btn-sign">
                对比(<span>3</span>)
            </a>
        </div>
    </footer>

</div>
</body>
<script src="js/mui.min.js" type="text/javascript"></script>
<script src="js/mui.pullToRefresh.js"></script>
<script src="js/mui.pullToRefresh.material.js"></script>
<script src="js/vue.min.js" type="text/javascript"></script>
<script type="text/javascript">
    mui.init();

    var contrast = new Vue({
        el: '#Js-contrast',
        data: {
            type: '',
            list: '',
            page: 0
        }
    });
    //主列表点击事件
    mui('body').on('tap', '.a-link', function () {
        var href = this.getAttribute('href');
        var id = this.getAttribute("data-wid");

        //非plus环境，直接走href跳转
        if (!mui.os.plus) {
            location.href = href;
            return;
        }
        ;
        if (href && ~href.indexOf('.html')) {
            //打开新窗口
            mui.openWindow({
                id: id,
                url: href,
                show: animateObj.aniDetal
            });
        }
    });
    (function ($) {
        //阻尼系数
        var deceleration = mui.os.ios ? 0.003 : 0.0009;
        $('#Js-wrapperList .mui-scroll-wrapper').scroll({
            bounce: true,
            indicators: false, //是否显示滚动条
            deceleration: deceleration
        });
        $.plusReady(function () {
            statusbar();
            var winH = window.innerHeight;
            var titHeight = document.querySelector('#Js-header').offsetHeight + 55;
            var footHieght = document.querySelector('#Js-footer').offsetHeight;
            document.querySelector('#Js-content').style.height = (winH - titHeight - footHieght) + 'px';

            var list = plus.webview.currentWebview().list;
            contrast.list = list;
            contrast.type = list.ins_type;
            //循环初始化所有下拉刷新，上拉加载。
            $('#Js-wrapperList .mui-scroll').pullToRefresh({
                up: { // 上拉加载更多
                    auto: true, // 自动上拉一次
                    callback: function () {
                        self = this
                        allGoods();
                    }
                }
            });
        });

    }(mui));

    //获取同类型的险种列表
    function allGoods() {
        mui.ajax('http://www.luckyins.com/api/api/invoke', {
            data: {
                device: 'pad',
                server: 'lifeProduct.getProductList',
                data: JSON.stringify({
                    page: contrast.page,
                    row: 10,
                    ins_type: contrast.type
                })
            },
            dataType: 'json',//服务器返回json格式数据
            type: 'post',//HTTP请求类型
            timeout: 10000,//超时时间设置为10秒；
            headers: {'Content-Type': 'application/json'},
            success: function (data) {
                console.log(JSON.stringify(data))
                if (data.code) {
                    mui.toast(data.msg, {duration: 'short', type: 'div'});
                } else {
                    mui.toast(data.msg, {duration: 'short', type: 'div'});
                    return false;
                }
            },
            error: function (xhr, type, errorThrown) {
                mui.toast(errorThrown, {duration: 'short', type: 'div'});
                return false
            }
        });
    }

</script>
</html>