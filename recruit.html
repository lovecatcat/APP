<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title></title>
	<link href="css/mui.css" rel="stylesheet"/>
	<link href="css/common.css" rel="stylesheet"/>
	<link href="css/module.css" rel="stylesheet"/>
	<link href="css/member.css" rel="stylesheet"/>
	<script src="js/config.js" type="text/javascript"></script>
</head>

<body class="BL-bg-fff">
<header id="Js-header" class="req-header">
	<a class="mui-action-back mui-icon-left-nav BL-icon req-iconLeft"></a>	
	<div class="BL-ub BL-ub-ver BL-ub-ac bd">
		<img id="Js-logo" src="images/member/req-hm.png" style="width: 18.6875rem;" />
		<div class="req-context">
			<img id="Js-avatar" src="images/icon/avatar-default.png" />
			<p><span id="Js-name">&nbsp;</span>的专属二维码</p>
		</div>
	</div>
</header>

<div class="req-content">
	<img id="Js-title" src="images/member/req-title.png" />
	<div class="BL-ub BL-ub-ac BL-ub-ver">
		<div class="req-wechat">
			<img id="Js-cord" src="" style="width: 100%;height: 100%;" />		
		</div>
		<img id="Js-desic" src="images/member/req-tap.png" />
	</div>
</div>

</body>
<script src="js/mui.min.js" type="text/javascript"></script>
<script src="js/plusShare.js" type="text/javascript"></script>
<script type="text/javascript">
    mui.init({
    	gestureConfig:{
    		longtap: true,
    	}
    });

    (function ($) {
        $.plusReady(function () {
        	var userinfo = JSON.parse(plus.storage.getItem('userinfo'));
        	var channel_info = plus.storage.getItem('channel_info');
        	var channel_id;
        	if(channel_info && channel_info != ''){
        		channel_id = channel_info ? JSON.parse(channel_info).channel_id : '';
        	}
            statusbar();
        	
        	document.getElementById('Js-cord').setAttribute('src', config.baseUrl + '?server=user.getQrcode&device=mobile&data={"user_id":"'+ userinfo.id +'"}');
        	document.getElementById('Js-avatar').setAttribute('src', userinfo.avatar !='' ? userinfo.avatar : 'images/icon/avatar-default.png');
	        document.getElementById('Js-name').innerText = userinfo.user_name;
	        
	        if(channel_id && channel_id == 4){
	        	document.getElementById('Js-logo').setAttribute('src', 'images/member/req-sc.png');
	        	document.getElementById('Js-title').setAttribute('src', 'images/member/req-title-sc.png');	
	        	document.getElementById('Js-desic').setAttribute('src', 'images/member/req-tap-sc.png');		
	        };
	        
	        
	        document.getElementById("Js-cord").addEventListener("longtap", function() {
			    //分享内容，开发者可自定义
			    var message = {
			        title: "新人注册", //名字
			        content: "【保险plus，更专业的保险管家】",
			        href: config.link + 'register/register.html?parent_id=' + userinfo.id, //分享出去后，点击跳转地址
			        thumbs: ["_www/images/pic/logo.png"] //分享缩略图
			    }
			    //调起分享
			    plusShare(message, function(res) {
			        //分享回调函数
			        if(res) {
			            plus.nativeUI.toast("分享成功");
			        } else {
			            plus.nativeUI.toast("分享失败");
			        }
			    })
			});
            
        });

    }(mui));
    

</script>

</html>