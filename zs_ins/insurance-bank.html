<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title></title>    <link href="../css/mui.css" rel="stylesheet"/>    <link href="../css/common.css" rel="stylesheet"/>    <link href="../css/module.css" rel="stylesheet"/>    <link href="../css/insurance.css" rel="stylesheet"/>    <script src="../js/config.js" type="text/javascript"></script>    <link rel="stylesheet" type="text/css" href="../css/mui.picker.min.css"/></head><body><div id="Js-content" class="mui-content BL-rel">    <!--弹窗 begin-->    <div class="ins-dialog md">        <div class="dialog-header">            <div class="mui-icon mui-icon-closeempty" id="close-ins-pop"></div>            <p class="ins-font-md box-f-1">付款信息</p>            <div class="header-btn-save">                <button class="ins-btn sm-btn blue" id="saveBank">保存</button>            </div>        </div>        <div class="form-content margin-t-6_125" v-cloak>            <div class="form-wrap">                <div class="border-b-e7e7e7">                    <div class="item-title orange">银行账户不支持信用卡</div>                </div>                <div class="input-item">                    <label class="">户名</label>                    <div class="input-wrap box-f-1">                        <input type="text" placeholder="请输入" v-model.lazy="bank_holder">                    </div>                </div>                <div class="input-item">                    <label class="">银行卡号</label>                    <div class="input-wrap box-f-1">                        <input type="number" placeholder="请输入" v-model.trim.lazy="bank_no">                        <div class="form-clear-icon" v-show="bank_no!=''" @click="bank_no=''">                            <span class="mui-icon mui-icon-clear"></span>                        </div>                    </div>                </div>                <div class="input-item">                    <label class="">账户类型</label>                    <div class="input-wrap box-f-1">                        <div class="input" id="bank_type" :data-value="bank_type">{{temp_bank_type}}</div>                        <div class="ins-down-icon"></div>                    </div>                </div>                <div class="input-item">                    <label class="">开户城市</label>                    <div class="input-wrap box-f-1">                        <div class="input" id="address-select">                            {{bank_ss_name}}                        </div>                        <div class="ins-down-icon"></div>                    </div>                </div>                <div class="input-item">                    <label class="">开户行</label>                    <div class="input-wrap box-f-1">                        <div class="input" id="bank_name" :data-value="bank_name">{{temp_bank_name}}</div>                        <div class="ins-down-icon"></div>                    </div>                </div>            </div>            <div class="BL-pad-lr-1">                <div class="mui-input-row mui-checkbox mui-left BL-pad-t-1">                    <label style="padding-left: 3rem;">                        本人已阅读并同意银行<a type="button" id="statement">《自动转账授权声明》</a>                        <input name="checkbox" value="Item1" type="checkbox" v-model="agree" style="top: 20px; left: 0px;">                    </label>                </div>            </div>        </div>    </div></div><!--弹窗 end--></div></body><script src="../js/mui.min.js" type="text/javascript"></script><script src="../js/vue.min.js" type="text/javascript"></script><script src="../js/mui.picker.js"></script><script src="../js/mui.poppicker.js"></script><script src="../js/city.data-3.js"></script><script type="text/javascript">    mui.init();    mui('body').on('tap', '#statement', function () {        mui.openWindow({            url: 'pay-statement.html',            id: 'pay_statement',            show: animateObj.aniDetal        })    })    var bank = new Vue({        el: '#Js-content',        data: {            init: {},            agree: false,            bank_holder: '', //户名            bank_name: '', //开户行            bank_type: '', //账户类型            temp_bank_name: '请选择', //开户行名称            temp_bank_type: '请选择', //账户类型名称            bank_ss_name: '请选择',            bank_province: '',            bank_province_name: '',            bank_area: '',            bank_area_name: '',            bank_no: ''//卡号        },        methods: {            checkFrom: function () {                var toast_text = null;                if (!this.bank_holder) {                    toast_text = '请填写户名';                } else if (!this.bank_no) {                    toast_text = '请填写银行卡号';                } else if (isNaN(this.bank_no)) {                    toast_text = '银行卡号必须是数字'                } else if (!this.bank_type) {                    toast_text = '请选择账户类型';                } else if (!this.bank_area) {                    toast_text = '请选择开户城市';                }  else if (!this.bank_name) {                    toast_text = '请选择开户行';                } else if (!this.agree) {                    toast_text = '请确认并同意自动转账授权声明';                }                if (toast_text) {                    mui.toast(toast_text, {duration: 'short', type: 'div'});                    return false;                }                return true;            }        }    });    mui.plusReady(function () {        var init = plus.webview.currentWebview().data;        bank.init = init;        //已填信息赋值        var applicant = plus.storage.getItem('zhaos_applicant') ? JSON.parse(plus.storage.getItem('zhaos_applicant')) : ''        bank.bank_holder = applicant ? applicant.holder_name : ''        var info = plus.storage.getItem('zhaos_bank') ? JSON.parse(plus.storage.getItem('zhaos_bank')) : ''        if (info) {            bank.agree = info.agree            bank.bank_holder = applicant ? applicant.holder_name : info.bank_holder            bank.bank_name = info.bank_name            bank.temp_bank_name = info.temp_bank_name            bank.bank_no = info.bank_no            bank.bank_type = info.bank_type //账户类型            bank.temp_bank_name = info.temp_bank_name //开户行名称            bank.temp_bank_type = info.temp_bank_type //账户类型名称            bank.bank_ss_name = info.bank_ss_name            bank.bank_province = info.bank_province            bank.bank_province_name = info.bank_province_name            bank.bank_area = info.bank_area            bank.bank_area_name = info.bank_area_name        }        //开户行选择        var bankName = new mui.PopPicker();        bankName.setData(init.bank_code);        document.querySelector('#bank_name').addEventListener('tap', function () {            document.activeElement.blur();            bankName.show(function (items) {                bank.bank_name = items[0].value;                bank.temp_bank_name = items[0].text;            })        });        //账户类型选择        var bankType = new mui.PopPicker();        bankType.setData(init.account_type);        document.querySelector('#bank_type').addEventListener('tap', function () {            document.activeElement.blur();            bankType.show(function (items) {                bank.bank_type = items[0].value;                bank.temp_bank_type = items[0].text;            })        });        //开户城市        var _getParam = function (obj, param) {            return obj[param] || '';        };        var bankarea = new mui.PopPicker({            layer: 2        });        bankarea.setData(cityData3);        document.querySelector('#address-select').addEventListener('tap', function () {            document.activeElement.blur();            bankarea.show(function (items) {                bank.bank_province = _getParam(items[0], 'value');                bank.bank_province_name = _getParam(items[0], 'text');                bank.bank_area = _getParam(items[1], 'value');                bank.bank_area_name = _getParam(items[1], 'text');                bank.bank_ss_name = _getParam(items[0], 'text') + ' ' + _getParam(items[1], 'text');            });        }, false);        //        var popu = new ClosePopu(); // 实例化关闭窗口对象        //安卓监听返回事件        plus.key.addEventListener("backbutton",function(){            popu.closepop();        });        //        //保存        document.querySelector('#saveBank').addEventListener('tap', function () {            document.activeElement.blur();            if (!bank.checkFrom()) {                return false            }            plus.storage.setItem('zhaos_bank', JSON.stringify({                bank_holder: bank.bank_holder, //户名                bank_name: bank.bank_name, //开户行                bank_type: bank.bank_type, //账户类型                temp_bank_name: bank.temp_bank_name, //开户行名称                temp_bank_type: bank.temp_bank_type, //账户类型名称                bank_ss_name: bank.bank_ss_name,                bank_province: bank.bank_province,                bank_province_name: bank.bank_province_name,                bank_area: bank.bank_area,                bank_area_name: bank.bank_area_name,                bank_no: bank.bank_no//卡号            }));            mui.fire(plus.webview.getWebviewById('zs_insurance-index'), 'saveFlag', {                item: 'zhaos_bank',                data: 'bank'            });            popu.closepop();            mui.back();        })        //        mui('body').on('tap', '#close-ins-pop', function () {            // 关闭遮罩层，弹框            popu.closepop();        });    });</script></html>